{% extends "base.html" %}

{% load wagtailcore_tags home_tags %}
{% load static %}
{% load humanize %}

{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}

{% block frontbanner %}
<!-- start front-banner content -->
<div class="layout-front-banner">
  <div class="front-banner__content front-banner__background" style="background-image: url({% static 'images/front-banner-image-default.png' %})">
    <div class="front-banner__text">
          {{ self.body|richtext }}
    </div>
  </div>
</div>
<!-- end front-banner content -->
{% endblock %}

{% block content %}

            <!-- start promoted content -->
            <div class="layout-promoted">
              <div class="layout-promoted__first">
                {% if self.commit_index %}
                <div class="list-banner list-banner--commit-watch">
                  <h3>Commit Watch</h3>
                  <ul>
                    {% for event in self.commit_index.events %}
                    <li class="commit-list__item">
                        {% if event.type == "PushEvent" %}
                            <a href={{event.repo.url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} pushed to {{event.payload.ref|cut:"refs/heads/"}} at {{event.repo.name}}</span>
                        {% elif event.type == "IssueCommentEvent" %}
                            <a href={{event.payload.issue.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} comment on issue #{{ event.payload.issue.number }} at {{event.repo.name}}</span>
                        {% elif event.type == "IssuesEvent" %}
                            <a href={{event.payload.issue.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} issue #{{ event.payload.issue.number }} at {{event.repo.name}}</span>
                        {% elif event.type == "PullRequestEvent" %}
                            <a href={{event.payload.pull_request.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} pull request #{{ event.payload.pull_request.number }} at {{event.repo.name}}</span>
                        {% elif event.type == "MemberEvent" %}
                            <a href={{event.payload.member.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} {{ event.payload.member.login }} to {{event.repo.name}}</span>
                        {% elif event.type == "ForkEvent" %}
                            <a href={{event.payload.forkee.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} forked {{event.repo.name}} to {{event.payload.forkee.full_name}}</span>
                        {% elif event.type == "WatchEvent" %}
                            <a href={{event.repo.url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} watching {{event.repo.name}}</span>
                        {% elif event.type == "PullRequestReviewCommentEvent" %}
                            <a href={{event.payload.comment.html_url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} {{event.payload.action}} comment on pull request #{{event.payload.pull_request.number}} at {{event.repo.name}}</span>
                        {% else %}
                            <a href={{event.repo.url}}>
                            <span class="commit-list__date">{{ event.created_at | naturaltime }}</span>
                            <span class="commit-list__description">{{event.actor.login}} - {{ event.type }} - {{event.repo.name}}</span>
                        {% endif %}
                        </a>
                    </li>
                    {% endfor %}
                  </ul>
                  <div class="list-banner__full-link">
                    <a href="{% pageurl self.commit_index %}">Full list of events >></a>
                  </div>
                </div>
                {% endif %}
              </div>
              <div class="layout-promoted__second">
                <div class="list-banner list-banner--available-apis">
                  <h3>Ongoing projects</h3>
                  <ul>
                    {% for project in self.project_index.projects %}
                    <li class="api-list__item">
                      <a href="{% pageurl project %}">
                      <span class="api-list__icon"><i class="fa fa-share-alt-square"></i></span>
                      <span class="api-list__header">{{ project.title }}</span>
                      </a>
                    </li>
                    {% endfor %}
                  </ul>
                  <div class="list-banner__full-link">
                    <a href="{% pageurl self.project_index %}">Full list of ongoing projects >></a>
                  </div>
                </div>
              </div>
            </div>
            <!-- end promoted content -->
            <div class="layout-page-content">
              <div class="hilight-banner hilight-banner--full">
                <div class="hilight-banner__box">
                  <div class="hilight-banner__content">
                    {% with blog=self.blog_index.blogs.first %}
                    <h5 class="hilight-banner__section">Blog</h5>
                    <h3>{{blog.title}}</h3>
                    <p>{{blog.body|first_p|richtext}}</p>
                    {% endwith %}
                  </div>
                </div>
              </div>
              <div class="hilight-banner hilight-banner--full">
                <div class="hilight-banner__box">
                  <div class="hilight-banner__content">
                    <h5 class="hilight-banner__section">Projects</h5>
                    <h3>{% lorem 5 w random %}</h3>
                    <p>{% lorem 30 w random %}</p>
                  </div>
                </div>
              </div>
              <div class="hilight-banner hilight-banner--half">
                <div class="hilight-banner__box">
                  <div class="hilight-banner__content">
                    <h5 class="hilight-banner__section">Events</h5>
                    <h3>{% lorem 5 w random %}</h3>
                    <p>{% lorem 30 w random %}</p>
                  </div>
                </div>
              </div>
              <div class="hilight-banner hilight-banner--half">
                <div class="hilight-banner__box">
                  <div class="hilight-banner__content">
                    <h5 class="hilight-banner__section">Blog</h5>
                    <h3>{% lorem 5 w random %}</h3>
                    <p>{% lorem 30 w random %}</p>
                  </div>
                </div>
              </div>
            </div>
            <aside class="layout-side-content">
              <div class="list-banner list-banner--events">
                <h3>Events</h3>
                <ul>
                  <li class="event-list__item">
                    <span class="event-list__date">18.9.2015</span>
                    <span class="event-list__header">{% lorem 2 w random %}</span>
                    <span class="event-list__description">{% lorem 5 w random %}</span>
                    <span class="event-list__link"><a href="#">Read more >></a></span>
                  </li>
                  <li class="event-list__item">
                    <span class="event-list__date">18.9.2015</span>
                    <span class="event-list__header">{% lorem 2 w random %}</span>
                    <span class="event-list__description">{% lorem 5 w random %}</span>
                    <span class="event-list__link"><a href="#">Read more >></a></span>
                  </li>
                  <li class="event-list__item">
                    <span class="event-list__date">18.9.2015</span>
                    <span class="event-list__header">{% lorem 2 w random %}</span>
                    <span class="event-list__description">{% lorem 5 w random %}</span>
                    <span class="event-list__link"><a href="#">Read more >></a></span>
                  </li>
                </ul>
                <div class="list-banner__full-link">
                  <a href="#">Full list of events >></a>
                </div>
              </div>
              <div class="some-banner">
                <a href="#">
                  <i class="fa fa-facebook-official fa-2x"></i>
                  We are in Facebook
                </a>
              </div>
              <div class="some-banner">
                <a href="#">
                  <i class="fa fa-github fa-2x"></i>
                  Find us in GitHub
                </a>
              </div>
            </aside>



{% endblock %}
